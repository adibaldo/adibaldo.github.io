---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);

const formatDate = (date: Date) => {
  return new Intl.DateTimeFormat('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  }).format(date);
};
---

<Layout title="The Memory Palace">
  <section class="max-w-2xl mx-auto py-8">
    <div class="mb-16 animate-fade-in">
      <h1 class="text-4xl md:text-5xl font-serif text-[#ff9e64] mb-6 tracking-tight relative inline-block">
        The Chronicle
        <span class="absolute -bottom-2 left-0 w-full h-1 bg-gradient-to-r from-[#7dcfff] to-transparent opacity-50"></span>
      </h1>
      
      <p class="text-lg md:text-xl leading-relaxed text-[#e0e0e0]/90 font-light">
        A digital memory palace. Thoughts on AI, philosophy, and the future, preserved in amber and electric light.
      </p>
      
      <div class="mt-6 flex gap-4 text-xs font-mono text-[#7dcfff]/60">
        <span>> STATUS: ONLINE</span>
        <span>> LOC: MEMORY_PALACE</span>
        <span>> LATENCY: 0ms</span>
      </div>
    </div>

    <div class="relative border-l border-[#2a2b36] ml-3 md:ml-6 space-y-12 pb-12">
      {posts.map((post, index) => (
        <article class="relative pl-8 md:pl-12 group transition-all duration-300 hover:translate-x-1">
          <!-- Timeline dot -->
          <div class="absolute -left-[5px] md:-left-[5px] top-2 w-2.5 h-2.5 rounded-full bg-[#1a1b26] border border-[#7dcfff] group-hover:bg-[#ff9e64] group-hover:border-[#ff9e64] group-hover:scale-125 transition-all z-10 shadow-[0_0_10px_rgba(125,207,255,0.2)]"></div>
          
          <div class="flex flex-col gap-1 mb-3">
            <time datetime={post.data.date.toISOString()} class="text-xs font-mono text-[#7dcfff]/70 tracking-wider uppercase mb-1 block">
              {formatDate(post.data.date)}
            </time>
            
            <h2 class="text-2xl font-serif font-bold leading-tight">
              <a href={`/blog/${post.slug}/`} class="text-[#e0e0e0] hover:text-[#ff9e64] transition-colors decoration-transparent group-hover:underline decoration-[#ff9e64]/30 underline-offset-4">
                {post.data.title}
              </a>
            </h2>
          </div>
          
          <p class="text-gray-400 text-sm md:text-base leading-relaxed line-clamp-3 mb-3 font-serif opacity-80 group-hover:opacity-100 transition-opacity">
            {post.body.substring(0, 200).replace(/[#*]/g, '')}...
          </p>
          
          <div class="flex items-center gap-4 text-xs font-mono text-gray-500 group-hover:text-[#7dcfff]/60 transition-colors">
            <a href={`/blog/${post.slug}/`} class="flex items-center gap-1 hover:text-[#ff9e64]">
              Read Entry 
              <span class="group-hover:translate-x-1 transition-transform">-></span>
            </a>
          </div>
        </article>
      ))}
    </div>
  </section>
</Layout>
